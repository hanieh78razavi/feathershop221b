<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ورود</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn&display=swap" rel="stylesheet" />
</head>


<body class="login-body">
   
    <div class="login-box">

        <h1 class="login-title">ورود به حساب کاربری</h1>

          <form action="/login" method="POST" class="login-form">
            <!--CSRF Token-->
            <input type="hidden" name="csrfmiddlewaretoken" value="YOUR_CSRF_TOKEN_HERE"/>   
            <div class="form-field">
            <!----------------------------------------->
                <label for="email"><i class="fas fa-envelope" aria-hidden="true"></i> ایمیل: </label>
                <input type="email" id="email" name="email" placeholder="example@gmail.com" required>
                 <span class="error-message" id="email-error"></span>
            </div>
            <!----------------------------------------->
            <div class="form-field">
            
                <label for="password"><i class="fas fa-lock" aria-hidden="true"></i> رمز عبور: </label>
                <input type="password" id="password" required placeholder="رمز عبور خود را وارد کنید">
                <span class="error-message" id="password-error"></span>
                 <div class="password-wrapper">
                 <i class="fas fa-eye toggle-password" onclick="togglePassword()" aria-label="نمایش/مخفی کردن رمز"></i>
             </div>
            </div>
            <!-- Remember Me + Forgot Password -->
            <div class="form-options">
                <label><input type="checkbox" name="remember" /> مرا به خاطر بسپار</label>
                <a href="/forgot-password" class="forgot-link">رمز عبور را فراموش کرده‌اید؟</a>
            </div>

            <button type="submit" class="login-submit-button">ورود  </button>
          </form>

            <p id="success-message" class="success-message"></p>
    </div>

<!--===========================scripts======================================================================================================-->
    <script>
        document.querySelector('.login-form').addEventListener('submit') , function(event) {
            event.preventDefault();
             // گرفتن فیلدها و ناحیه پیام خطا
  const emailInput = document.getElementById('email');
  const passwordInput = document.getElementById('password');
  const emailError = document.getElementById('email-error');
  const passwordError = document.getElementById('password-error');
  const successMessage = document.getElementById('success-message');

  // ریست کردن پیام‌ها
  emailError.textContent = '';
  passwordError.textContent = '';
  successMessage.textContent = '';
  email.classList.remove('input-error');
  password.classList.remove('input-error');

   let hasError = false;

  // بررسی ایمیل
  if (!emailInput.value.includes('@') || !emailInput.value.includes('.')) {
    emailError.textContent = 'ایمیل وارد شده معتبر نیست.';
    hasError = true;
  }

  // بررسی رمز عبور
  if (passwordInput.value.length < 6) {
    passwordError.textContent = 'رمز عبور باید حداقل ۶ کاراکتر باشد.';
    hasError = true;
  }

  // اگر خطایی نبود، فرم رو ارسال کن
  if (!hasError) {
    event.target.submit(); // حالا فرم ارسال میشه
  }
};
        
    function togglePassword(){
        const passwordField = document.getElementById("password");
        const icon = document.querySelector(".toggle-password");
            if (passwordField.type === "password") {
                passwordField.type = "text";
                icon.classList.replace("fa-eye" , "fa-eye-slash");
            }

            else{
                passwordField.type = "password";
                icon.classList.replace("fa-eye-slash" , "fa-eye");
            }
        }

    </script>

</body>
</html>